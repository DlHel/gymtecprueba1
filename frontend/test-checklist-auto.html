<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Checklist Automático - Gymtec ERP</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/ticket-detail.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto p-6">
        <h1 class="text-2xl font-bold mb-6">🤖 Test Checklist Automático Basado en Modelo</h1>
        
        <div class="bg-white p-4 rounded border mb-6">
            <h2 class="font-bold mb-4">🔬 Simulación de Tickets con Equipos</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <button onclick="simulateCardioTicket()" class="p-4 bg-blue-100 border border-blue-300 rounded hover:bg-blue-200">
                    <h3 class="font-semibold text-blue-800">🏃 Equipo Cardio</h3>
                    <p class="text-sm text-blue-600">Simular ticket con cinta de correr</p>
                </button>
                
                <button onclick="simulateFuerzaTicket()" class="p-4 bg-green-100 border border-green-300 rounded hover:bg-green-200">
                    <h3 class="font-semibold text-green-800">💪 Equipo Fuerza</h3>
                    <p class="text-sm text-green-600">Simular ticket con máquina de pesas</p>
                </button>
            </div>
        </div>
        
        <div class="ticket-section-card">
            <div class="ticket-section-header">
                <h3 class="ticket-section-title">
                    <i data-lucide="check-square" class="w-5 h-5"></i>
                    Lista de Tareas
                    <span id="checklist-counter" class="ticket-counter-badge">0/0</span>
                </h3>
                <button id="add-checklist-btn" class="ticket-action-btn primary">
                    <i data-lucide="plus" class="w-4 h-4"></i>
                    Agregar Tarea
                </button>
            </div>
            <div id="checklist-items" class="ticket-checklist-items">
                <div class="ticket-empty-state">
                    <i data-lucide="play-circle" class="w-12 h-12 mx-auto mb-4 text-gray-300"></i>
                    <h3>Selecciona un tipo de equipo</h3>
                    <p>Haz clic en uno de los botones de arriba para ver el checklist automático</p>
                </div>
            </div>
        </div>
        
        <div class="mt-4 p-4 bg-white rounded border">
            <h4 class="font-bold mb-2">📋 Estado del Sistema:</h4>
            <div id="debug-info"></div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/ticket-detail.js"></script>
    
    <script>
        // Simular datos de ticket con equipo Cardio
        function simulateCardioTicket() {
            console.log('🏃 Simulando ticket con equipo Cardio...');
            
            window.state = {
                currentTicket: { 
                    id: 999,
                    title: "Mantenimiento Cinta de Correr",
                    equipment_id: 1,
                    equipment_name: "Life Fitness Integrity+ Treadmill",
                    equipment_category: "Cardio",
                    checklist_auto_generated: true
                },
                checklist: [
                    {
                        id: 1,
                        title: "Inspección visual externa",
                        description: "Verificar estado general del equipo",
                        is_completed: false,
                        order_index: 0
                    },
                    {
                        id: 2,
                        title: "Limpieza y desinfección",
                        description: "Limpiar superficies y desinfectar puntos de contacto",
                        is_completed: false,
                        order_index: 1
                    },
                    {
                        id: 3,
                        title: "Verificar funcionamiento de pantalla",
                        description: "Comprobar que la pantalla enciende y responde",
                        is_completed: true,
                        completed_by: "Felipe Maturana",
                        completed_at: new Date().toISOString(),
                        order_index: 2
                    },
                    {
                        id: 4,
                        title: "Probar botones y controles",
                        description: "Verificar que todos los botones funcionan correctamente",
                        is_completed: false,
                        order_index: 3
                    },
                    {
                        id: 5,
                        title: "Verificar sistema de lubricación",
                        description: "Revisar niveles y funcionamiento del sistema de lubricación",
                        is_completed: false,
                        order_index: 4
                    },
                    {
                        id: 6,
                        title: "Inspeccionar cableado",
                        description: "Verificar que no hay cables sueltos o dañados",
                        is_completed: false,
                        order_index: 5
                    },
                    {
                        id: 7,
                        title: "Prueba de funcionamiento completo",
                        description: "Ejecutar ciclo completo de prueba del equipo",
                        is_completed: false,
                        order_index: 6
                    }
                ]
            };
            
            renderChecklist();
            updateChecklistCounter();
        }
        
        // Simular datos de ticket con equipo Fuerza
        function simulateFuerzaTicket() {
            console.log('💪 Simulando ticket con equipo Fuerza...');
            
            window.state = {
                currentTicket: { 
                    id: 998,
                    title: "Mantenimiento Máquina de Pesas",
                    equipment_id: 2,
                    equipment_name: "Matrix Mega Power Rack",
                    equipment_category: "Fuerza",
                    checklist_auto_generated: true
                },
                checklist: [
                    {
                        id: 1,
                        title: "Inspección visual externa",
                        description: "Verificar estado general del equipo",
                        is_completed: false,
                        order_index: 0
                    },
                    {
                        id: 2,
                        title: "Limpieza y desinfección",
                        description: "Limpiar superficies y desinfectar puntos de contacto",
                        is_completed: false,
                        order_index: 1
                    },
                    {
                        id: 3,
                        title: "Verificar ajustes y seguros",
                        description: "Comprobar que los ajustes y sistemas de seguridad funcionan",
                        is_completed: false,
                        order_index: 2
                    },
                    {
                        id: 4,
                        title: "Inspeccionar cables y poleas",
                        description: "Verificar estado de cables, poleas y sistemas de transmisión",
                        is_completed: true,
                        completed_by: "Felipe Maturana",
                        completed_at: new Date().toISOString(),
                        order_index: 3
                    },
                    {
                        id: 5,
                        title: "Lubricar puntos de fricción",
                        description: "Aplicar lubricación en puntos necesarios",
                        is_completed: false,
                        order_index: 4
                    },
                    {
                        id: 6,
                        title: "Verificar pesos y contrapesos",
                        description: "Comprobar que los pesos están correctamente asegurados",
                        is_completed: false,
                        order_index: 5
                    },
                    {
                        id: 7,
                        title: "Prueba de funcionamiento completo",
                        description: "Ejecutar movimientos completos del equipo",
                        is_completed: false,
                        order_index: 6
                    }
                ]
            };
            
            renderChecklist();
            updateChecklistCounter();
        }
        
        // Mostrar información de debug inicial
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('debug-info').innerHTML = `
                <p><strong>API URL:</strong> ${API_URL}</p>
                <p><strong>Templates disponibles:</strong> Cardio, Fuerza</p>
                <p><strong>Estado:</strong> Listo para simular checklist automático</p>
            `;
            
            lucide.createIcons();
        });
    </script>
</body>
</html> 