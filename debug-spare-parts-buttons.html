<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Botones de Repuestos</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-button { 
            background: #007bff; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            margin: 10px; 
            border-radius: 5px; 
            cursor: pointer; 
        }
        #console-output { 
            background: #f8f9fa; 
            border: 1px solid #ddd; 
            padding: 15px; 
            margin-top: 20px; 
            height: 300px; 
            overflow-y: scroll; 
            font-family: monospace; 
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ Debug - Botones de Repuestos</h1>
    
    <p>Simula los botones que aparecen en ticket-detail para probar su funcionamiento:</p>
    
    <!-- Simular los botones del ticket-detail -->
    <button id="add-spare-part-btn" class="test-button">
        â• Agregar Repuesto
    </button>
    
    <button id="request-spare-part-btn" class="test-button">
        ğŸ›’ Solicitar Repuesto
    </button>
    
    <button id="add-first-spare-part" class="test-button">
        ğŸ¯ Agregar Primer Repuesto
    </button>
    
    <button onclick="testAPI()" class="test-button">
        ğŸ§ª Test API Endpoints
    </button>
    
    <div id="console-output"></div>

    <script>
        // Simular el entorno de ticket-detail
        const API_URL = 'http://localhost:3000/api';
        
        // FunciÃ³n para logging
        function log(message) {
            const output = document.getElementById('console-output');
            output.innerHTML += `<div><strong>${new Date().toLocaleTimeString()}:</strong> ${message}</div>`;
            output.scrollTop = output.scrollHeight;
            console.log(message);
        }
        
        // Simular las funciones que deberÃ­an existir
        function showAddSparePartModal() {
            log('âœ… showAddSparePartModal() llamada correctamente');
            alert('Modal de Agregar Repuesto se abrirÃ­a aquÃ­');
        }
        
        function showRequestSparePartModal() {
            log('âœ… showRequestSparePartModal() llamada correctamente');
            alert('Modal de Solicitar Repuesto se abrirÃ­a aquÃ­');
        }
        
        function showNotification(message, type) {
            log(`ğŸ“¢ NotificaciÃ³n (${type}): ${message}`);
        }
        
        // Simular el event listener de delegaciÃ³n
        document.addEventListener('click', (e) => {
            log(`ğŸ–±ï¸ Click detectado en: ${e.target.id || e.target.tagName}`);
            
            if (e.target.id === 'add-spare-part-btn' || e.target.closest('#add-spare-part-btn')) {
                e.preventDefault();
                log('ğŸ”§ Click en botÃ³n agregar repuesto');
                if (typeof showAddSparePartModal === 'function') {
                    showAddSparePartModal();
                } else {
                    log('âŒ showAddSparePartModal no estÃ¡ definida');
                }
            }
            
            if (e.target.id === 'add-first-spare-part' || e.target.closest('#add-first-spare-part')) {
                e.preventDefault();
                log('ğŸ”§ Click en botÃ³n primer repuesto');
                if (typeof showAddSparePartModal === 'function') {
                    showAddSparePartModal();
                } else {
                    log('âŒ showAddSparePartModal no estÃ¡ definida');
                }
            }
            
            if (e.target.id === 'request-spare-part-btn' || e.target.closest('#request-spare-part-btn')) {
                e.preventDefault();
                log('ğŸ›’ Click en botÃ³n solicitar repuesto');
                if (typeof showRequestSparePartModal === 'function') {
                    showRequestSparePartModal();
                } else {
                    log('âŒ showRequestSparePartModal no estÃ¡ definida');
                }
            }
        });
        
        async function testAPI() {
            log('ğŸ§ª Probando endpoints de la API...');
            
            try {
                const response = await fetch(`${API_URL}/inventory/spare-parts`);
                if (response.ok) {
                    const data = await response.json();
                    log(`âœ… API funcionando: ${data.data?.length || 0} repuestos encontrados`);
                } else {
                    log(`âŒ API error: ${response.status} ${response.statusText}`);
                }
            } catch (error) {
                log(`âŒ Error de conexiÃ³n: ${error.message}`);
                log('ğŸ’¡ AsegÃºrate de que el servidor estÃ© ejecutÃ¡ndose en localhost:3000');
            }
        }
        
        // Log inicial
        log('ğŸš€ Debug page cargada. Haz click en los botones para probar.');
        log('ğŸ“ Event listeners configurados via delegaciÃ³n');
        
        // Verificar que las funciones existen
        log(`ğŸ” showAddSparePartModal definida: ${typeof showAddSparePartModal === 'function'}`);
        log(`ğŸ” showRequestSparePartModal definida: ${typeof showRequestSparePartModal === 'function'}`);
    </script>
</body>
</html>
